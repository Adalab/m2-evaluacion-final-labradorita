{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\nconsole.log(\">> Ready :)\");\n\nlet series = [];\nconst favSeries = [];\nconst inputText = document.querySelector(\".js-input\");\nconst buttonSearch = document.querySelector(\".js-button\");\n//const mainList = document.querySelector(\".js-list\");\n\nconst defImage = \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n\n// methods to fetch data from server\n\nconst getDataFromServer = () => {\n  return fetch(`http://api.tvmaze.com/search/shows?q=${inputText.value}`)\n    .then(response => response.json())\n    .then(data => {\n      console.log(\"Fetch data from server and return it as JSON >>> Return\", data);\n      data = formatData(data);\n      saveDataInSeries(data);\n      paintSeries();\n      listenSeries();\n      // setPalettesIntoLocalStorage();\n    });\n};\n\n// creamos array de las peliculas buscadas, con los datos necesarios\nconst formatData = data => {\n  const searchResult = [];\n  //for (const palette of data.palettes) {\n  for (let i = 0; i < data.length; i = i + 1) {\n    searchResult.push({\n      image: data[i].show.image.medium,\n      name: data[i].show.name\n    });\n  }\n  console.log(\"Format JSON data and return it as array >>> Return\", searchResult);\n  return searchResult;\n};\n\n//Guarda los datos en el array\nconst saveDataInSeries = data => {\n  series = data;\n  console.log(\"Save data in series array >> series\", series);\n};\n\nconst paintSeries = () => {\n  // cojo elemento contenedor del DOM\n  const mainList = document.querySelector(\".js-list\");\n  // declaramos string vacío para pasarlo por el innerHTML\n  let htmlCode = \"\";\n  for (let serieIndex = 0; serieIndex < series.length; serieIndex = serieIndex + 1) {\n    htmlCode += `<div class=\"series__item \n    ${getFavoriteClassName(serieIndex)}\n    js-serie\" data-index=\"${serieIndex}\">`;\n    htmlCode += `<img  class=\"series__image\" src=\"${series[serieIndex].image}\" alt=\"\">`;\n    htmlCode += `<p class=\"series__name\">${series[serieIndex].name}</p>`;\n    htmlCode += \"</div>\";\n  }\n  mainList.innerHTML = htmlCode;\n  console.log(\"Paint series form `series` array into DOM >>> series:\", series, \"Favorites:\", favSeries);\n};\n\nconst getFavoriteClassName = serieIndex => {\n  if (isFavoriteSerie(serieIndex)) {\n    return \"serie__item--favorite\";\n  } else {\n    return \"\";\n  }\n};\n\n// Esuchar si se ha hecho click (fav) y coger esa acción\n\nconst listenSeries = () => {\n  console.log(\"Listen click on new serie DOM elements\");\n  const serieContainer = document.querySelectorAll(\".js-serie\");\n  for (const serieContainerIndex of serieContainer) {\n    serieContainerIndex.addEventListener(\"click\", handleClick);\n  }\n};\n\nconst handleClick = ev => {\n  console.log(\"Handle click on a palette DOM element\");\n  const serieIndex = getClickedSerieIndex(ev);\n  if (isFavoriteSerie(serieIndex)) {\n    removeFavorite(serieIndex);\n  } else {\n    addFav(serieIndex);\n  }\n  paintSeries();\n  listenSeries();\n};\n\nconst getClickedSerieIndex = ev => {\n  const currentTarget = ev.currentTarget;\n  const clickedSerieIndex = parseInt(currentTarget.dataset.index);\n  console.log(\"Get clicked palette from event and return the clicked palette index >>> Clicked palette:\", clickedSerieIndex);\n  return clickedSerieIndex;\n};\n\nconst isFavoriteSerie = serieIndex => {\n  const foundIndex = favSeries.indexOf(series[serieIndex]);\n  // acción + operación matemática =0 --> boolean, no tiene logica\n  if (foundIndex >= 0) {\n    console.log(`Check if serieIndex ${serieIndex} it is favorite >>>`, true);\n    return true;\n  } else {\n    console.log(`Check if serieIndex ${serieIndex} it is not favorite >>>`, false);\n    return false;\n  }\n};\n\nconst addFav = serieIndex => {\n  // Tenemos que pasarle el objeto entero para llamarlo de LS\n  favSeries.push(series[serieIndex]);\n  //favSeries.push(serieIndex);\n  console.log(\"Add serieIndex to `favSeries` array >>> Favorites:\", favSeries);\n};\n\nconst removeFavorite = serieIndex => {\n  const favoriteIndex = favSeries.indexOf(series[serieIndex]);\n  favSeries.splice(favoriteIndex, 1);\n  console.log(\"Remove paletteIndex from `favSeries` array >>> Favourites:\", favSeries);\n};\n\nbuttonSearch.addEventListener(\"click\", getDataFromServer);\n"]}